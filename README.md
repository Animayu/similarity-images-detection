# 图片相似度欺诈检测系统

基于Streamlit和imagededup构建的图片相似度检测Web应用，可用于保险欺诈检测等场景。

## 功能特点

- 支持两种相似度检测算法：CNN和pHash
- 可自定义相似度阈值
- 实时可视化相似图片结果
- 支持结果导出（CSV格式）
- 自动缓存图片特征，提高后续检索速度

## 安装步骤

1. 确保已安装Python 3.7+
2. 克隆本仓库或下载源代码
3. 安装依赖库：

```bash
pip install -r requirements.txt
```

### 可能遇到的问题

如果安装imagededup时遇到问题，可以尝试：

```bash
pip install tensorflow
pip install imagededup
```

## 运行方法

1. 准备好图片库，放在`input/test_images/`目录下（或自定义目录）
2. 运行Streamlit应用：

```bash
streamlit run app.py
```

3. 浏览器会自动打开应用（默认地址：http://localhost:8501）

## 使用说明

1. **参数设置**（左侧边栏）：
   - 选择算法：CNN、pHash或两种都使用
   - 设置相似度阈值
   - 设置显示的最相似图片数量
   - 指定图片库路径

2. **上传图片**：
   - 点击"选择图片上传"按钮，选择要比对的图片

3. **查看结果**：
   - 应用会自动进行相似度检测，并显示检测结果
   - 可视化展示原图与相似图片对比
   - 显示相似度分数和文件名

4. **导出结果**：
   - 检测完成后，可点击"下载"按钮导出CSV格式的检测结果

## 目录结构

```
.
├── app.py                 # 主应用代码
├── requirements.txt       # 依赖库清单
├── input/                 # 图片库目录
│   └── test_images/       # 测试图片
├── cache/                 # 特征缓存目录（自动创建）
└── README.md              # 项目说明
```

## 性能说明

- 首次运行时，系统会对整个图片库进行编码，可能需要几分钟时间
- 后续运行会使用缓存的特征，速度会大大提升
- 对于大型图片库（1万+图片），推荐使用更强大的硬件

## 后续开发计划

- 添加更多图像相似度算法
- 支持批量上传图片
- 添加误报/漏报分析功能
- 构建API服务 